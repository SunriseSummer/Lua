# MoonCangjie ä»“é¢‰å¥”æœˆè®¡åˆ’ ğŸŒ•

æœ¬é¡¹ç›®åœ¨ Lua è¿è¡Œæ—¶ä¸Šå«æ¥ä»“é¢‰ç¼–ç¨‹è¯­è¨€ï¼Œä»¥å®ç°ä»“é¢‰ï¼ˆCangjieï¼‰ç¨‹åºçš„è§£é‡Šæ‰§è¡Œï¼Œå°†ä»“é¢‰çš„ç°ä»£è¯­è¨€ç‰¹æ€§ä¸ Lua çš„åŠ¨æ€è¿è¡Œæ—¶èƒ½åŠ›èåˆå¢å¼ºã€‚

## æ”¯æŒçš„ä»“é¢‰è¯­è¨€ç‰¹æ€§

### å˜é‡

- **ä¸å¯å˜å˜é‡** `let`ï¼š`let x: Int64 = 42`
- **å¯å˜å˜é‡** `var`ï¼š`var name: String = "hello"`
- **ç±»å‹æ³¨è§£**ï¼šæ”¯æŒ `Int64`ã€`Float64`ã€`String`ã€`Bool`ã€`Rune` ç­‰ç±»å‹æ ‡æ³¨ï¼Œä¹Ÿæ”¯æŒæ³›å‹ç±»å‹ `Array<Int64>`ã€åµŒå¥—æ³›å‹ `Array<Array<Int64>>`ã€å‡½æ•°ç±»å‹ `(Int64, Int64) -> Int64`ã€æ³›å‹å†…å‡½æ•°ç±»å‹ `Array<(Int64) -> Int64>` ç­‰å¤åˆç±»å‹æ³¨è§£
- **ç±»å‹æ¨æ–­**ï¼šå¯çœç•¥ç±»å‹æ³¨è§£ï¼Œç”±å³å€¼æ¨æ–­ç±»å‹

### æ•°æ®ç±»å‹

- Int64
- Float64
- Bool
- Runeï¼ˆUnicode å­—ç¬¦ç±»å‹ï¼‰
- String
- Tuple
- Array
- Range
- Unit
- Option

#### Rune ç±»å‹

å­—ç¬¦ç±»å‹ä½¿ç”¨ `Rune` è¡¨ç¤ºï¼Œå¯ä»¥è¡¨ç¤º Unicode å­—ç¬¦é›†ä¸­çš„æ‰€æœ‰å­—ç¬¦ã€‚Rune å­—é¢é‡**ä»…**ä½¿ç”¨ `r` å‰ç¼€å½¢å¼ï¼Œç¼–è¯‘æ—¶è½¬ä¸ºæ•´æ•°ç ç‚¹ï¼š

```cangjie
// r å‰ç¼€è¡¨ç¤º Rune å­—é¢é‡ï¼ˆç¼–è¯‘ä¸ºæ•´æ•°ç ç‚¹ï¼‰
let a: Rune = r'a'           // 97
let b: Rune = r"b"           // 98

// è½¬ä¹‰å­—ç¬¦
let slash: Rune = r'\\'      // 92
let newLine: Rune = r'\n'    // 10
let tab: Rune = r'\t'        // 9

// é€šç”¨å­—ç¬¦ - \u{åå…­è¿›åˆ¶ç å€¼}
let he: Rune = r'\u{4f60}'   // 0x4f60 (ä½ )
let llo: Rune = r'\u{597d}'  // 0x597d (å¥½)

// æ³¨æ„ï¼š'x' å’Œ "x" éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ˜¯ Rune
let s = 'a'                  // å­—ç¬¦ä¸² "a"
```

Rune ç±»å‹ï¼ˆæ•´æ•°ç ç‚¹ï¼‰æ”¯æŒå…³ç³»æ“ä½œç¬¦ï¼ˆ`<`ã€`>`ã€`<=`ã€`>=`ã€`==`ã€`!=`ï¼‰ï¼Œæ¯”è¾ƒçš„æ˜¯å­—ç¬¦çš„ Unicode å€¼ã€‚ä½¿ç”¨ `Rune(code_point)` å¯å°†ç ç‚¹è½¬ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²ã€‚

### ç±»å‹è½¬æ¢

æ”¯æŒå†…ç½®ç±»å‹çš„æ„é€ å‡½æ•°é£æ ¼è½¬æ¢ï¼š

```cangjie
let a = Int64(r'ä¹')        // Rune å­—é¢é‡ä¸ºæ•´æ•°ç ç‚¹ (0x4E50)
let b = Float64("3.14")     // å­—ç¬¦ä¸²è½¬ä¸ºæµ®ç‚¹æ•°
let c = Int64("1234567")    // å­—ç¬¦ä¸²è§£æä¸ºæ•´æ•°
let d = Bool("true")        // å­—ç¬¦ä¸²è½¬ä¸ºå¸ƒå°”å€¼
let e = Int64(3.14)         // æµ®ç‚¹æ•°è½¬ä¸ºæ•´æ•°ï¼ˆæˆªæ–­ï¼‰
let f = Float64(42)         // æ•´æ•°è½¬ä¸ºæµ®ç‚¹æ•°
let g = String(65)          // æ•´æ•°è½¬ä¸ºå­—ç¬¦ä¸² "65"
let h = String(3.14)        // æµ®ç‚¹æ•°è½¬ä¸ºå­—ç¬¦ä¸²
let i = String(true)        // å¸ƒå°”å€¼è½¬ä¸ºå­—ç¬¦ä¸²
let j = Rune(0x4E50)        // Unicode ç å€¼è½¬ä¸ºå¯¹åº”å­—ç¬¦ 'ä¹'
```

**Rune å­—é¢é‡**ï¼šä»… `r'x'` / `r"x"` è¡¨ç¤º Rune å­—é¢é‡ï¼Œç¼–è¯‘æ—¶è½¬ä¸ºæ•´æ•°ç ç‚¹ï¼ˆå¦‚ `r'A'` = 65ã€`r'0'` = 48ï¼‰ï¼›`'x'` å’Œ `"x"` éƒ½è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚

**Int64 è½¬æ¢è§„åˆ™**ï¼š`Int64(String)` ä¼˜å…ˆè§£ææ•°å­—ï¼ˆ`Int64("0")` = 0ï¼‰ï¼Œè§£æå¤±è´¥æ—¶æŒ‰å•å­—ç¬¦ç ç‚¹å¤„ç†ï¼ˆ`Int64("A")` = 65ï¼‰ï¼›`Int64(Rune)` ç›´æ¥é€ä¼ æ•´æ•°ç ç‚¹ã€‚

**String.toRune()**ï¼šå•å­—ç¬¦å­—ç¬¦ä¸²è½¬ Unicode ç ç‚¹ï¼Œä¸å—æ•°å€¼è§£æå½±å“ï¼ˆ`"0".toRune()` = 48ï¼‰ã€‚

ä¹Ÿæ”¯æŒä¼ ç»Ÿçš„ `tostring()`ã€`tonumber()` è½¬æ¢å‡½æ•°ã€‚

### è¿ç®—ç¬¦

- **ç®—æœ¯è¿ç®—**ï¼š`+`ã€`-`ã€`*`ã€`/`ã€`%`ï¼ˆæˆªæ–­å–æ¨¡ï¼Œç¬¦å·è·Ÿéšè¢«é™¤æ•°ï¼‰ã€`**`ï¼ˆå¹‚è¿ç®—ï¼‰
- **æ¯”è¾ƒè¿ç®—**ï¼š`==`ã€`!=`ã€`>`ã€`<`ã€`>=`ã€`<=`
- **é€»è¾‘è¿ç®—**ï¼š
  - `&&`: é€»è¾‘ä¸
  - `||`: é€»è¾‘æˆ–
  - `!`: é€»è¾‘é
- **ä½è¿ç®—**ï¼š
  - `&`: æŒ‰ä½ä¸
  - `|`: æŒ‰ä½æˆ–
  - `^`: æŒ‰ä½å¼‚æˆ–
  - `!`: æŒ‰ä½æ±‚åï¼Œä¹Ÿæ”¯æŒ Lua é£æ ¼çš„ `~`
  - `<<`: å¾ªç¯å·¦ç§»
  - `>>`: å¾ªç¯å³ç§»
- **ç©ºå€¼åˆå¹¶**ï¼š`??`ï¼ˆOption ç±»å‹çš„é»˜è®¤å€¼è¿ç®—ç¬¦ï¼‰

### å­—ç¬¦ä¸²

- **åŸç”Ÿ UTF-8 æ”¯æŒ**ï¼šå­—ç¬¦ä¸²é»˜è®¤é‡‡ç”¨ UTF-8 ç¼–è§£ç ï¼Œç´¢å¼•ã€åˆ‡ç‰‡ã€é•¿åº¦ç­‰æ“ä½œå‡åŸºäº Unicode å­—ç¬¦ï¼ˆè€Œéå­—èŠ‚ï¼‰
- **æ’å€¼å­—ç¬¦ä¸²**ï¼š`"Hello, ${name}!"` æ”¯æŒåœ¨ `${}` ä¸­åµŒå…¥ä»»æ„è¡¨è¾¾å¼
- **å­—ç¬¦ä¸²æ‹¼æ¥**ï¼šå¯ä»¥ä½¿ç”¨ `+` æ‹¼æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿæ”¯æŒ Lua é£æ ¼çš„ `..`
- **ç´¢å¼•å–å€¼**ï¼š`s[0]` è¿”å›ç¬¬ 0 ä¸ª Unicode å­—ç¬¦ï¼ˆRune ç±»å‹ï¼Œ0-basedï¼‰
- **åˆ‡ç‰‡å–å€¼**ï¼š`s[1..4]`ï¼ˆæ’ä»–ï¼‰ã€`s[0..=2]`ï¼ˆåŒ…å«ï¼‰è¿”å›å­å­—ç¬¦ä¸²ï¼ŒåŸºäºå­—ç¬¦ä½ç½®
- **é•¿åº¦å±æ€§**ï¼š`s.size` è¿”å› Unicode å­—ç¬¦æ•°é‡ï¼ˆéå­—èŠ‚æ•°ï¼‰
- **å¸¸ç”¨æˆå‘˜æ–¹æ³•**ï¼ˆå‚è€ƒä»“é¢‰ String è®¾è®¡ï¼‰ï¼š
  - `s.isEmpty()` â€” åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º
  - `s.contains(sub)` â€” æ˜¯å¦åŒ…å«å­ä¸²
  - `s.startsWith(prefix)` / `s.endsWith(suffix)` â€” å‰ç¼€/åç¼€åˆ¤æ–­
  - `s.indexOf(sub [, fromIndex])` â€” æŸ¥æ‰¾å­ä¸²é¦–æ¬¡å‡ºç°çš„å­—ç¬¦ä½ç½®ï¼ˆè¿”å› -1 è¡¨ç¤ºæœªæ‰¾åˆ°ï¼‰
  - `s.lastIndexOf(sub [, fromIndex])` â€” æŸ¥æ‰¾å­ä¸²æœ€åå‡ºç°çš„å­—ç¬¦ä½ç½®
  - `s.replace(old, new)` â€” æ›¿æ¢æ‰€æœ‰åŒ¹é…çš„å­ä¸²
  - `s.split(sep)` â€” æŒ‰åˆ†éš”ç¬¦æ‹†åˆ†ï¼Œè¿”å› 0-based æ•°ç»„ï¼›ä¼ ç©ºä¸²æŒ‰ Unicode å­—ç¬¦æ‹†åˆ†
  - `s.trim()` / `s.trimStart()` / `s.trimEnd()` â€” å»é™¤é¦–å°¾ç©ºç™½
  - `s.toAsciiUpper()` / `s.toAsciiLower()` â€” ASCII å¤§å°å†™è½¬æ¢
  - `s.count(sub)` â€” ç»Ÿè®¡å­ä¸²å‡ºç°æ¬¡æ•°
  - `s.toRune()` â€” å•å­—ç¬¦å­—ç¬¦ä¸²è½¬ä¸º Unicode ç ç‚¹æ•´æ•°
  - `s.toArray()` â€” è½¬ä¸º `Array<Byte>`ï¼ˆUTF-8 å­—èŠ‚æ•°ç»„ï¼‰
  - `s.toRuneArray()` â€” è½¬ä¸º `Array<Rune>`ï¼ˆUnicode å­—ç¬¦æ•°ç»„ï¼‰

```cangjie
let s = "Helloä½ å¥½ğŸ˜€"
println(s.size)        // 8ï¼ˆUnicode å­—ç¬¦æ•°ï¼Œéå­—èŠ‚æ•°ï¼‰
println(s[5])          // "ä½ "ï¼ˆè¿”å› Rune å­—ç¬¦ï¼‰
println(s[5..=6])      // "ä½ å¥½"
println(s.isEmpty())   // false
println(s.contains("ä½ å¥½"))  // true
println(s.indexOf("ä½ å¥½"))   // 5
println(s.toArray().size)    // 15ï¼ˆUTF-8 å­—èŠ‚æ•°ï¼‰
println(s.toRuneArray().size) // 8ï¼ˆUnicode å­—ç¬¦æ•°ï¼‰

// Array<Byte> ä¸ String äº’è½¬
let bytes: Array<Byte> = s.toArray()       // String -> Array<Byte>
let restored = __cangjie_string_from_byte_array(bytes)  // Array<Byte> -> String
```

### æ§åˆ¶æµ

- **æ¡ä»¶è¯­å¥**ï¼š`if`ã€`else if`ã€`else`ï¼Œæ¡ä»¶éœ€ç”¨æ‹¬å·åŒ…è£¹
- **while å¾ªç¯**ï¼š`while (condition) { ... }`
- **for å¾ªç¯**ï¼š
  - æ’ä»–èŒƒå›´ï¼š`for (i in 1..10) { ... }`
  - åŒ…å«èŒƒå›´ï¼š`for (i in 1..=10) { ... }`
  - æ­¥é•¿ï¼ˆåŒ…å«èŒƒå›´ï¼‰ï¼š`for (i in 0..=10:2) { ... }`
  - æ­¥é•¿ï¼ˆæ’ä»–èŒƒå›´ï¼‰ï¼š`for (i in 0..10:2) { ... }`
  - æ­¥é•¿é…åˆè¡¨è¾¾å¼ï¼š`for (i in 0..arr.size:2) { ... }`
  - æ•°ç»„éå†ï¼š`for (item in array) { ... }`
- **break è¯­å¥**ï¼šåœ¨å¾ªç¯ä¸­æå‰è·³å‡º
- **continue è¯­å¥**ï¼šè·³è¿‡å½“å‰è¿­ä»£ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯
- **åµŒå¥—å¾ªç¯**

### å‡½æ•°

- **å‡½æ•°å®šä¹‰**ï¼š`func add(a: Int64, b: Int64): Int64 { return a + b }`ï¼Œè¿”å›å€¼ç±»å‹å¯çœç•¥æ ‡æ³¨
- **ä¸€ç­‰å…¬æ°‘**ï¼šå‡½æ•°å¯ä»¥ç”¨ä½œå‚æ•°ã€è¿”å›å€¼ã€å˜é‡èµ‹å€¼
- **å‡½æ•°ç±»å‹æ ‡æ³¨**ï¼š`func apply(fn: (Int64, Int64) -> Int64, a: Int64, b: Int64)`
- **åµŒå¥—å‡½æ•°**ä¸**é—­åŒ…**ï¼šåµŒå¥—å‡½æ•°å’Œå…¶æ•è·çš„å¤–å±‚å˜é‡ä¸€èµ·å°è£…ä¸ºé—­åŒ…
- **å‡½æ•°é‡è½½**ï¼šæ”¯æŒåŒåå‡½æ•°å®šä¹‰ä¸åŒå‚æ•°ä¸ªæ•°çš„å¤šä¸ªç‰ˆæœ¬ï¼Œè¿è¡Œæ—¶æŒ‰å‚æ•°ä¸ªæ•°è‡ªåŠ¨æ´¾å‘
  ```cangjie
  func describe(a: Int64): String { return "one" }
  func describe(a: Int64, b: Int64): String { return "two" }
  describe(1)     // è°ƒç”¨ç¬¬ä¸€ä¸ªç‰ˆæœ¬
  describe(1, 2)  // è°ƒç”¨ç¬¬äºŒä¸ªç‰ˆæœ¬
  ```
- **Lambda è¡¨è¾¾å¼**ï¼š
  - å¸¦å‚æ•°ï¼š`{ x: Int64, y: Int64 => x + y }`
  - æ— å‚æ•°ï¼š`{ => println("hello") }`
  - çœç•¥ç±»å‹æ ‡æ³¨ï¼š`{ x, y => x * y }`
  - å‡½æ•°ä½“ï¼š`{ x => var y = x + 1; return y }`
  - ä¹Ÿæ”¯æŒ Lua é£æ ¼çš„åŸæ‹¬å·è¯­æ³•ï¼šå¦‚ `(x, y) => { x + y }`
- **Lambda ç«‹å³è°ƒç”¨ï¼ˆIIFEï¼‰**ï¼šLambda è¡¨è¾¾å¼å¯ä»¥ç›´æ¥è·Ÿ `()` ç«‹å³è°ƒç”¨
  ```cangjie
  let x = { => 42 }()               // æ— å‚æ•° IIFE
  let y = { a, b => a + b }(3, 4)   // å¸¦å‚æ•° IIFEï¼Œy = 7
  let z = { => { x => x + 1 } }()(5)  // é“¾å¼ IIFEï¼Œz = 6
  ```
- **Lambda ä½œä¸ºå‡½æ•°å‚æ•°**ï¼šLambda è¡¨è¾¾å¼å¯ä½œä¸ºå‡½æ•°ç±»å‹å‚æ•°ä¼ é€’
  ```cangjie
  func apply(fn: (Int64, Int64) -> Int64, a: Int64, b: Int64): Int64 { ... }
  apply({ x, y => x + y }, 3, 4)  // ç»“æœä¸º 7
  ```
- **å‘½åå‚æ•°**ï¼šä½¿ç”¨ `!` åç¼€å£°æ˜å‘½åå‚æ•°ï¼Œå¯ä»¥ä¸ºå‘½åå‚æ•°è®¾ç½®é»˜è®¤å€¼
  ```cangjie
  func power(base: Int64, exponent!: Int64 = 2): Int64 { ... }
  power(3, exponent: 2)     // ä¸ºå‘½åå‚æ•°ä¼ å‚ï¼Œéœ€è¦å†™å‚æ•°åå‰ç¼€
  power(3)        // æœ‰é»˜è®¤å€¼çš„å‘½åå‚æ•°å¯ä»¥çœç•¥ä¼ å‚ï¼Œè¿™æ—¶ä»¥é»˜è®¤å€¼ä½œä¸ºå®å‚
  ```
- **Unit ç±»å‹å­—é¢é‡**ï¼š`()` è¡¨ç¤ºç©ºå€¼ï¼ˆæ˜ å°„ä¸º nilï¼‰
- **é€’å½’**
- **å¤šè¿”å›å€¼**

### è‡ªå®šä¹‰ç±»å‹

#### struct
```cangjie
struct Point {
  var x: Int64
  var y: Int64
  init(x: Int64, y: Int64) {
    this.x = x
    this.y = y
  }
  func toString(): String {
    return "(${x}, ${y})"
  }
}
```

#### class
```cangjie
class Animal {
  var name: String
  init(name: String) {
    this.name = name
  }
  func speak(): String {
    return "${name} says hello!"
  }
}

// ç»§æ‰¿ä½¿ç”¨ <: è¯­æ³•
class Dog <: Animal {
  var breed: String
  init(name: String, breed: String) {
    this.name = name
    this.breed = breed
  }
  // æ–¹æ³•é‡å†™ - è¿è¡Œæ—¶åŠ¨æ€æ´¾å‘ï¼ˆå¤šæ€ï¼‰
  func speak(): String {
    return "${name} barks!"
  }
}
```

æ”¯æŒçš„ç»§æ‰¿ç‰¹æ€§ï¼š
- **å•ç»§æ‰¿**ï¼š`class Child <: Parent { ... }`
- **å¼€æ”¾ç±»**ï¼š`open class Parent { ... }` â€” ä½¿ç”¨ `open` ä¿®é¥°çš„ç±»æ‰èƒ½è¢«ç»§æ‰¿
- **æ¥å£å®ç°**ï¼š`class Point <: Printable { ... }`
- **å¤šçº§ç»§æ‰¿**ï¼š`class GuideDog <: Dog`ï¼ˆDog å·²ç»§æ‰¿ Animalï¼‰
- **æ–¹æ³•é‡å†™**ï¼šå­ç±»å¯é‡å†™çˆ¶ç±»çš„ `open` æ–¹æ³•ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ´¾å‘
- **æ–¹æ³•ç»§æ‰¿**ï¼šå­ç±»è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»æœªé‡å†™çš„æ–¹æ³•
- **å¤šæ€**ï¼šçˆ¶ç±»å¼•ç”¨å¯è°ƒç”¨å­ç±»é‡å†™çš„æ–¹æ³•
- **super è°ƒç”¨**ï¼šå­ç±»æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ `super(args)` è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
  ```cangjie
  open class Circle {
      Circle(var x: Int64, var y: Int64, var radius: Float64) {}
      open public func info(): String { "${x}, ${y}, ${radius}" }
  }
  class Cylinder <: Circle {
      var height: Float64 = 1.0
      init(x: Int64, y: Int64, r: Float64, h: Float64) {
          super(x, y, r)
          this.height = h
      }
  }
  ```

#### å®ä¾‹åŒ–ï¼ˆæ„é€ å‡½æ•°è°ƒç”¨ï¼‰
```cangjie
let p = Point(3, 4)  // è°ƒç”¨ init
let dog = Animal("Dog")
```

#### ä¸»æ„é€ å‡½æ•°

struct å’Œ class æ”¯æŒä¸»æ„é€ å‡½æ•°è¯­æ³•ï¼Œå³ä»¥ç±»å‹åä½œä¸ºæ„é€ å‡½æ•°åï¼Œå‚æ•°åˆ—è¡¨ä¸­ç›´æ¥å®šä¹‰æˆå‘˜å˜é‡ï¼Œè§£é‡Šå™¨ä¼šè‡ªåŠ¨ä¼ é€’å®å‚ç»™å¯¹åº”æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼š

```cangjie
class Wave {
  Wave(let freq: Float64, var phi: Float64) {
    // å…¶ä»–åˆå§‹åŒ–æ“ä½œ
  }
}

// ç­‰ä»·äºï¼š
class Wave {
  let freq: Float64
  var phi: Float64
  init(freq: Float64, phi: Float64) {
    this.freq = freq
    this.phi = phi
    // å…¶ä»–åˆå§‹åŒ–æ“ä½œ
  }
}

let w = Wave(440.0, 0.5)
println(w.freq)     // 440.0
w.phi = 1.0         // var å­—æ®µå¯ä¿®æ”¹
```

ä¸»æ„é€ å‡½æ•°ç‰¹æ€§ï¼š
- å‚æ•°å‰åŠ  `let` å£°æ˜ä¸ºä¸å¯å˜æˆå‘˜å˜é‡
- å‚æ•°å‰åŠ  `var` å£°æ˜ä¸ºå¯å˜æˆå‘˜å˜é‡
- æ„é€ å‡½æ•°ä½“ä¸­å¯ä»¥è®¿é—®å‚æ•°å¹¶æ‰§è¡Œé¢å¤–åˆå§‹åŒ–é€»è¾‘
- ä¸ `init` æ„é€ å‡½æ•°äº’æ–¥ï¼Œä¸€ä¸ªç±»å‹åªèƒ½ä½¿ç”¨å…¶ä¸­ä¸€ç§

#### è‡ªåŠ¨æ„é€ å‡½æ•°

å½“ struct æˆ– class çš„ `var` å­—æ®µæœ‰é»˜è®¤å€¼ä½†æœªå®šä¹‰æ˜¾å¼ `init` æ„é€ å‡½æ•°æ—¶ï¼Œæ”¯æŒæŒ‰å­—æ®µé¡ºåºä¼ å‚æ„é€ ï¼š

```cangjie
class A {
  var x: Int64 = 0
  var y: Int64 = 1
}
let a = A(2, 4)    // a.x == 2, a.y == 4

struct B {
  var x: Int64 = 0
  var y: String = ""
}
let b = B(1, "hello")  // b.x == 1, b.y == "hello"
```

#### é™æ€æˆå‘˜å‡½æ•°

é™æ€æˆå‘˜å‡½æ•°å±äºç±»å‹æœ¬èº«ï¼Œä¸éœ€è¦å®ä¾‹å³å¯è°ƒç”¨ï¼Œä¹Ÿæ²¡æœ‰ `this`/`self` å‚æ•°ï¼š

```cangjie
struct MathUtils {
  var value: Int64
  init(v: Int64) { this.value = v }

  static func add(a: Int64, b: Int64): Int64 {
    return a + b
  }

  func addToValue(n: Int64): Int64 {
    return add(value, n)  // æˆå‘˜å‡½æ•°ä¸­å¯ç›´æ¥è°ƒç”¨é™æ€å‡½æ•°
  }
}

MathUtils.add(3, 4)  // é€šè¿‡ç±»å‹åè°ƒç”¨ï¼Œç»“æœä¸º 7
```

#### æ“ä½œç¬¦å‡½æ•°é‡è½½

åœ¨ struct/class/enum ä¸­é€šè¿‡ `operator func` é‡è½½æ“ä½œç¬¦å‡½æ•°ã€‚
**å¯é‡è½½æ“ä½œç¬¦**ï¼š`+`ã€`-`ã€`*`ã€`/`ã€`%`ã€`**`ã€`==`ã€`<`ã€`<=`ã€`<<`ã€`>>`ã€`&`ã€`|`ã€`^`ã€`~`ã€`#`

```cangjie
struct Vector {
  var x: Int64
  var y: Int64
  init(x: Int64, y: Int64) { this.x = x; this.y = y }

  operator func +(other: Vector): Vector {
    return Vector(x + other.x, y + other.y)
  }

  operator func ==(other: Vector): Bool {
    return x == other.x && y == other.y
  }
}

let v = Vector(1, 2) + Vector(3, 4)  // Vector(4, 6)
```

#### this å¯çœç•¥

åœ¨ struct å’Œ class çš„æ„é€ å‡½æ•°å’Œå®ä¾‹æˆå‘˜å‡½æ•°ä¸­ï¼Œå¼•ç”¨æˆå‘˜å˜é‡æ—¶å¯ä»¥çœç•¥ `this.` å‰ç¼€ï¼š
```cangjie
struct Counter {
  var count: Int64
  init() {
    count = 0        // ç­‰ä»·äº this.count = 0
  }
  func increment() {
    count = count + 1  // ç­‰ä»·äº this.count = this.count + 1
  }
}
```

#### å¯è§æ€§ä¿®é¥°ç¬¦

æ”¯æŒ `public` å’Œ `private` ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚`open` ä¿®é¥°ç±»è¡¨ç¤ºå¯è¢«ç»§æ‰¿ï¼Œä¿®é¥°æ–¹æ³•è¡¨ç¤ºå¯è¢«å­ç±»é‡å†™ï¼š

```cangjie
open class Account {
    public var name: String = ""
    private var balance: Float64 = 0.0
    public func deposit(amount: Float64) {
        this.balance = this.balance + amount
    }
    open public func info(): String {
        "${name}: ${balance}"
    }
}
```

### interfaceï¼ˆæ¥å£ï¼‰
```cangjie
interface Animal {
  func speak(): String
}

// è‡ªå®šä¹‰ç±»å‹å¯å®ç°æ¥å£
class Dog <: Animal {
  var name = "Tom"
  // å®ç°æ¥å£ä¸­çš„å‡½æ•°
  func speak(): String {
    return "${name} barks!"
  }
}
```

### extendï¼ˆæ‰©å±•ï¼‰

ä¸ºå·²æœ‰ç±»å‹æ·»åŠ æˆå‘˜å‡½æ•°ï¼Œæ”¯æŒç›´æ¥æ‰©å±•å’ŒåŸºäºæ¥å£æ‰©å±•
```cangjie
// ç›´æ¥æ‰©å±•
extend Int64 {
  func describe(): String {
    return "value is ${this}"
  }
}

// åŸºäºæ¥å£æ‰©å±•
interface Printable {
  func toString(): String
}

extend Int64 <: Printable {
  func toString(): String {
    return "value is ${this}"
  }
}
```

åœ¨ `interface` å’Œ `extend` ä¸­ä¹Ÿæ”¯æŒ `operator func` å£°æ˜æˆ–å®ç°ã€‚

æ‰©å±•æ–¹æ³•å¯ä»¥ç›´æ¥åœ¨å­—é¢é‡ä¸Šè°ƒç”¨ï¼Œæ— éœ€ä¸­é—´å˜é‡ï¼š
```cangjie
extend Int64 {
  func pow(e: Int64): Int64 { this ** e }
  func double(): Int64 { this * 2 }
  func even(): Bool { this % 2 == 0 }
}
println(2.pow(10))       // 1024.0
println(3.double())      // 6
println(4.even())        // true

extend String {
  func shout(): String { this .. "!!!" }
}
println("hello".shout()) // hello!!!

extend Bool {
  func toStr(): String { if (this) { "yes" } else { "no" } }
}
println(true.toStr())    // yes

// æ–¹æ³•é“¾å¼è°ƒç”¨
println(5.double().double())  // 20
```

### å…ƒç»„ç±»å‹

```cangjie
// åˆ›å»ºå…ƒç»„ï¼ˆè‡ªåŠ¨0ç´¢å¼•ï¼‰
let t = (1, "hello", true)
println(t[0])  // 1
println(t[1])  // hello
println(t[2])  // true

// ç”¨äºå‡½æ•°è¿”å›å€¼
func minmax(a: Int64, b: Int64) {
  if (a < b) {
    return (a, b)
  }
  return (b, a)
}

let result = minmax(5, 3)
println(result[0])  // 3
println(result[1])  // 5
```

æ”¯æŒçš„å…ƒç»„ç‰¹æ€§ï¼š
- **æ··åˆç±»å‹**ï¼šå…ƒç»„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹
- **0 ç´¢å¼•è®¿é—®**ï¼š`t[0]`ã€`t[1]` ç­‰
- **åµŒå¥—å…ƒç»„**ï¼šå…ƒç»„å…ƒç´ å¯ä»¥æ˜¯å…¶ä»–å…ƒç»„
- **å‡½æ•°è¿”å›å€¼**ï¼šå¯ç”¨å…ƒç»„åŒ…è£…å¤šä¸ªè¿”å›å€¼
- **å…ƒç»„æ¨¡å¼åŒ¹é…**ï¼š`case (x, y) => ...`

### æšä¸¾ç±»å‹

```cangjie
// åŸºæœ¬æšä¸¾
enum Direction {
  | North
  | South
  | East
  | West
}

// å¸¦å‚æ•°çš„æšä¸¾æ„é€ å™¨
enum Color {
  | Red
  | Green
  | Blue(Int64)
  | RGB(Int64, Int64, Int64)

  // æšä¸¾æˆå‘˜å‡½æ•°
  func describe(): String {
    match (this) {
      case Red =>
        return "Red"
      case Blue(v) =>
        return "Blue(${v})"
      case _ =>
        return "Other"
    }
  }
}

// æ³›å‹æšä¸¾
enum Option<T> {
  | Some(T)
  | None

  func isPresent(): Bool {
    match (this) {
      case Some(v) =>
        return true
      case None =>
        return false
    }
  }
}

// é€’å½’æšä¸¾ï¼ˆå¦‚è¡¨è¾¾å¼æ ‘ï¼‰
enum Expr {
  | Num(Int64)
  | Add(Expr, Expr)
  | Sub(Expr, Expr)
}

// æšä¸¾æ“ä½œç¬¦é‡è½½
enum Money {
  | Yuan(Int64)

  operator func +(other: Money): Money {
    match (self) {
      case Yuan(a) => match (other) {
        case Yuan(b) => return Yuan(a + b)
      }
    }
  }
}

let total = Yuan(100) + Yuan(200)  // Yuan(300)
```

æ”¯æŒçš„æšä¸¾ç‰¹æ€§ï¼š
- **æ— å‚æ„é€ å™¨**ï¼š`| Red` - åˆ›å»ºå•ä¾‹å€¼
- **å¸¦å‚æ„é€ å™¨**ï¼š`| Blue(Int64)` - åˆ›å»ºå·¥å‚å‡½æ•°
- **å¤šå‚æ•°æ„é€ å™¨**ï¼š`| RGB(Int64, Int64, Int64)`
- **é€’å½’æšä¸¾**ï¼šæ„é€ å™¨å‚æ•°å¯å¼•ç”¨æšä¸¾è‡ªèº«ç±»å‹ï¼ˆå¦‚ `Node(Int64, Tree, Tree)`ï¼‰
- **è¡Œå†…æ„é€ å™¨**ï¼šæ”¯æŒ `Empty | Leaf(Int64) | Node(Int64, Tree, Tree)` è¡Œå†…è¯­æ³•ï¼ˆé¦–ä¸ªæ„é€ å™¨æ— éœ€ `|` å‰ç¼€ï¼‰
- **æ³›å‹æšä¸¾**ï¼š`enum Option<T> { | Some(T) | None }`
- **æˆå‘˜å‡½æ•°**ï¼šæšä¸¾ç±»å‹å†…å¯å®šä¹‰ `func`ï¼Œé€šè¿‡ `this` å¼•ç”¨å½“å‰æšä¸¾å®ä¾‹
- **æ“ä½œç¬¦é‡è½½**ï¼šåœ¨æšä¸¾ä¸­æ”¯æŒ `operator func` é‡è½½è¿ç®—ç¬¦ï¼ˆ`+`ã€`-`ã€`*`ã€`==` ç­‰ï¼‰ï¼Œä½¿æšä¸¾å®ä¾‹æ”¯æŒç®—æœ¯å’Œæ¯”è¾ƒæ“ä½œ
- **ç›´æ¥è®¿é—®**ï¼šæ— å‘½åå†²çªæ—¶å¯ç›´æ¥ä½¿ç”¨æšä¸¾é¡¹åå­— `Red`ï¼Œä¹Ÿå¯ä½¿ç”¨é™å®šå `Color.Red`

### æ³›å‹

- **æ³›å‹å‡½æ•°**ï¼š`func identity<T>(x: T): T { return x }`
- **æ³›å‹ struct**ï¼š`struct Box<T> { var value: T; ... }`
- **å¤šç±»å‹å‚æ•°**ï¼š`struct Pair<T, U> { ... }`
- **æ³›å‹æ–¹æ³•**
- **ç±»å‹å‚æ•°æ¨æ–­**

### Option ç±»å‹

å†…å»ºæ”¯æŒ `Option<T>` ç±»å‹ï¼Œæä¾› `?Type` è¯­æ³•ç³–ï¼š

```cangjie
// ?Int64 ç­‰ä»·äº Option<Int64>
let a: ?Int64 = Some(42)
let b: ?Int64 = None

// æ–¹æ³•
a.isSome()          // true
a.isNone()          // false
a.getOrThrow()      // 42ï¼ˆNone æ—¶æŠ›é”™ï¼‰
b.getOrDefault({ => 0 })   // 0ï¼ˆå‚æ•°ä¸º () -> T ç±»å‹å‡½æ•°ï¼‰

// æ¨¡å¼åŒ¹é…
match (a) {
  case Some(v) => println(v)
  case None => println("none")
}

// ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ ??
let x = a ?? 0      // 42ï¼ˆä» Some ä¸­å–å€¼ï¼‰
let y = b ?? 99     // 99ï¼ˆNone ä½¿ç”¨é»˜è®¤å€¼ï¼‰
```

### æ¨¡å¼åŒ¹é…

```cangjie
// æšä¸¾æ¨¡å¼åŒ¹é…ï¼ˆ=> åæ— éœ€å¤§æ‹¬å·ï¼‰
match (color) {
  case Red =>
    println("red")
  case Blue(val) =>
    println("blue: ${val}")
  case _ =>
    println("other")
}

// å¸¸é‡æ¨¡å¼åŒ¹é…
match (x) {
  case 0 =>
    println("zero")
  case 1 =>
    println("one")
  case _ =>
    println("other")
}

// ç±»å‹æ¨¡å¼åŒ¹é…
match (animal) {
  case d: Dog =>
    println(d.bark())
  case c: Cat =>
    println("${c.name} meows!")
  case _ =>
    println("unknown")
}

// å…ƒç»„æ¨¡å¼åŒ¹é…
match (pair) {
  case (x, y) =>
    println("pair: ${x}, ${y}")
}

// é€’å½’æšä¸¾æ±‚å€¼
func eval(e) {
  match (e) {
    case Num(n) =>
      return n
    case Add(a, b) =>
      return eval(a) + eval(b)
    case Sub(a, b) =>
      return eval(a) - eval(b)
  }
}
```

æ”¯æŒçš„æ¨¡å¼åŒ¹é…ç‰¹æ€§ï¼š
- **æšä¸¾æ„é€ å™¨æ¨¡å¼**ï¼šåŒ¹é…æšä¸¾å˜ä½“å¹¶è§£æ„å‚æ•°
- **å¸¸é‡æ¨¡å¼**ï¼šåŒ¹é…æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²å­—é¢é‡
- **é€šé…ç¬¦æ¨¡å¼**ï¼š`_` åŒ¹é…ä»»æ„å€¼
- **ç±»å‹æ¨¡å¼**ï¼š`case x: Type =>` æŒ‰ç±»å‹åŒ¹é…å¹¶ç»‘å®šå˜é‡
- **å…ƒç»„æ¨¡å¼**ï¼š`case (a, b) =>` è§£æ„å…ƒç»„å…ƒç´ 
- **å‚æ•°ç»‘å®š**ï¼šåœ¨æšä¸¾/å…ƒç»„æ¨¡å¼ä¸­ç»‘å®šè§£æ„å€¼åˆ°å±€éƒ¨å˜é‡
- **å¤šåˆ†æ”¯**ï¼šæŒ‰é¡ºåºåŒ¹é…ï¼Œå‘½ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…çš„åˆ†æ”¯
- **æ— å¤§æ‹¬å·è¯­æ³•**ï¼š`=>` åç›´æ¥å†™å¤šè¡Œè¯­å¥ï¼Œç”±ä¸‹ä¸€ä¸ª `case` æˆ– `}` åˆ†éš”
- **if-let æ¨¡å¼åŒ¹é…**ï¼š`if (let Pattern <- expr) { ... }` è§£æ„å¹¶åˆ¤æ–­
- **while-let æ¨¡å¼åŒ¹é…**ï¼š`while (let Pattern <- expr) { ... }` å¾ªç¯è§£æ„
- **ä¸é€»è¾‘è¡¨è¾¾å¼æ··åˆ**ï¼š`if (let Some(v) <- expr && v > 0)` æˆ– `if (let Some(v) <- expr || fallback)`

#### if-let å’Œ while-let

```cangjie
// if-letï¼šè§£æ„ Option å€¼
let opt = Some(42)
if (let Some(v) <- opt) {
  println("got: ${v}")    // got: 42
}

// ä¸ && æ··åˆï¼šæ¨¡å¼åŒ¹é…æˆåŠŸä¸”é¢å¤–æ¡ä»¶æ»¡è¶³
if (let Some(v) <- opt && v > 10) {
  println("v is ${v}, greater than 10")
}

// ä¸ || æ··åˆï¼šæ¨¡å¼åŒ¹é…æˆåŠŸæˆ–å¤‡é€‰æ¡ä»¶ä¸ºçœŸ
if (let Some(v) <- opt || fallbackCondition) {
  println("entered")
}

// while-letï¼šå¾ªç¯è§£æ„
while (let Some(v) <- getNext()) {
  println(v)
}
```

### è¡¨è¾¾å¼æ±‚å€¼

#### if è¡¨è¾¾å¼

if è¯­å¥å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼ï¼Œå…¶å€¼ä¸ºæ‰€æ‰§è¡Œåˆ†æ”¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚å¦‚æœæ²¡æœ‰åˆ†æ”¯è¢«æ‰§è¡Œï¼Œå€¼ä¸º nilï¼š

```cangjie
let x = if (score >= 90) { "A" } else if (score >= 80) { "B" } else { "C" }

// æ²¡æœ‰ else åˆ†æ”¯æ—¶ï¼ŒæœªåŒ¹é…çš„ if è¡¨è¾¾å¼å€¼ä¸º nil
let y = if (false) { 42 }  // y == nil
```

#### match è¡¨è¾¾å¼

match è¯­å¥å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼ï¼Œå…¶å€¼ä¸ºæ‰€åŒ¹é…åˆ†æ”¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚å¦‚æœæ²¡æœ‰åˆ†æ”¯è¢«åŒ¹é…ï¼Œå€¼ä¸º nilï¼š

```cangjie
let name = match (day) {
  case 1 => "Monday"
  case 2 => "Tuesday"
  case _ => "Other"
}
```

#### ä»£ç å—è¡¨è¾¾å¼

ä»£ç å— `{ ... }` å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼ï¼Œå€¼ä¸ºå…¶ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ç©ºä»£ç å—çš„å€¼ä¸º nilï¼š

```cangjie
let sum = {
  var s = 0
  for (i in 0..100) {
    s = s + i
  }
  s
}
```

#### å‡½æ•°éšå¼è¿”å›

å‡½æ•°ä½“ä¸­å¦‚æœæœ€åä¸€ä¸ªè¯­å¥æ˜¯è¡¨è¾¾å¼ï¼ˆä¸æ˜¯ returnï¼‰ï¼Œåˆ™è¯¥è¡¨è¾¾å¼çš„å€¼ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼š

```cangjie
func add(a: Int64, b: Int64): Int64 {
  a + b
}

func greet(name: String): String {
  "Hello, " + name + "!"
}
```

#### æœªç¡®å®šæ±‚å€¼è§„åˆ™çš„è¡¨è¾¾å¼

å¯¹äº whileã€for ç­‰å°šæœªç¡®å®šæ±‚å€¼è§„åˆ™çš„è¡¨è¾¾å¼ï¼Œå…¶å€¼å§‹ç»ˆä¸º nilï¼š

```cangjie
let r = while (false) { println("unreachable") }  // r == nil
let f = for (i in 0..0) { println(i) }             // f == nil
```

### å¤šç»´æ•°ç»„ä¸ Array åˆå§‹åŒ–

```cangjie
// å¤šç»´æ•°ç»„
let matrix = [[1, 2, 3], [4, 5, 6]]
println(matrix[0][1])    // 2

// Array åˆå§‹åŒ–ï¼ˆæŒ‡å®šå¤§å°å’Œåˆå§‹å€¼ï¼‰
let zeros = Array<Int64>(5, 0)           // [0, 0, 0, 0, 0]
let squares = Array<Int64>(4, { i: Int64 => i * i })  // [0, 1, 4, 9]

// å¤šç»´ Array åˆå§‹åŒ–
let grid = Array<Array<Int64>>(3, { i: Int64 =>
  Array<Int64>(3, { j: Int64 => i * 3 + j })
})
```

### Array\<Byte\> ä¸å­—ç¬¦ä¸²äº’è½¬

`Array<Byte>`ï¼ˆUInt8 çš„åˆ«åæ˜¯ Byteï¼‰ç”¨äºè¡¨ç¤ºåŸå§‹å­—èŠ‚åºåˆ—ï¼Œæ”¯æŒ String ä¸ Array\<Byte\> ä¹‹é—´æŒ‰ UTF-8 ç¼–ç äº’è½¬ï¼š

```cangjie
// String -> Array<Byte>ï¼ˆUTF-8 å­—èŠ‚æ•°ç»„ï¼‰
let s = "Helloä½ å¥½"
let bytes: Array<Byte> = s.toArray()
println(bytes.size)    // 11ï¼ˆ5 + 3 + 3 å­—èŠ‚ï¼‰
println(bytes[0])      // 72ï¼ˆH çš„ ASCII/UTF-8 ç ï¼‰

// Array<Byte> -> String
let restored = __cangjie_string_from_byte_array(bytes)
println(restored)      // "Helloä½ å¥½"

// String -> Array<Rune>ï¼ˆUnicode å­—ç¬¦æ•°ç»„ï¼‰
let runes: Array<Rune> = s.toRuneArray()
println(runes.size)    // 7ï¼ˆUnicode å­—ç¬¦æ•°ï¼‰
println(runes[5])      // "ä½ "
```

### æ•°ç»„åˆ‡ç‰‡ï¼ŒåŒºé—´ç´¢å¼•

æ”¯æŒä½¿ç”¨åŒºé—´è¡¨è¾¾å¼å¯¹æ•°ç»„è¿›è¡Œåˆ‡ç‰‡å–å€¼å’Œèµ‹å€¼ï¼š

```cangjie
let arr = [10, 20, 30, 40, 50, 60]

// å·¦é—­å³å¼€åŒºé—´å–å€¼ï¼šarr[start..end] å– [start, end) èŒƒå›´
let r1 = arr[0..3]      // [10, 20, 30]

// é—­åŒºé—´å–å€¼ï¼šarr[start..=end] å– [start, end] èŒƒå›´
let r2 = arr[2..=4]      // [30, 40, 50]

// åŒºé—´èµ‹å€¼ï¼šå°†å€¼æ•°ç»„å†™å…¥æŒ‡å®šèŒƒå›´
var arr2 = [0, 0, 0, 0, 0, 0]
arr2[1..=3] = [100, 200, 300]  // arr2 å˜ä¸º [0, 100, 200, 300, 0, 0]
```

### é›†åˆç±»å‹

- **ArrayList**ï¼šåŸºäºæ³›å‹å®ç°çš„åŠ¨æ€æ•°ç»„
  - æ–¹æ³•ï¼š`add()`ã€`get()`ã€`set()`ã€`removeAt()`ã€`indexOf()`ã€`contains()`ã€`clear()`ã€`forEach()`ã€`map()`ã€`filter()`
  - å±æ€§ï¼š`size`ã€`isEmpty()`

- **HashMap**ï¼šåŸºäºæ³›å‹å®ç°çš„å“ˆå¸Œè¡¨
  - æ–¹æ³•ï¼š`put()`ã€`get()`ã€`containsKey()`ã€`remove()`ã€`forEach()`

## èåˆ Lua çš„æ‰©å±•èƒ½åŠ›ï¼ˆåŠ¨æ€ç‰¹æ€§ï¼‰

æœ¬é¡¹ç›®çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå°†ä»“é¢‰çš„é™æ€ç±»å‹è¯­æ³•ä¸ Lua çš„åŠ¨æ€è¿è¡Œæ—¶æ— ç¼èåˆï¼Œæä¾›ä»¥ä¸‹æ‰©å±•èƒ½åŠ›ï¼š

### åŠ¨æ€ç±»å‹

- **nil å€¼**ï¼šæ”¯æŒ Lua çš„ nil ç©ºå€¼
- **å¤šé‡èµ‹å€¼**ï¼š`let a, b = 100, 200`
- **å¤šè¿”å›å€¼**ï¼šå‡½æ•°å¯è¿”å›å¤šä¸ªå€¼
- **åŠ¨æ€ç±»å‹å˜é‡**ï¼šå˜é‡å¯åœ¨è¿è¡Œæ—¶æŒæœ‰ä»»æ„ç±»å‹å€¼
- **é¸­å­ç±»å‹**ï¼šæ–¹æ³•è°ƒç”¨åŸºäºè¿è¡Œæ—¶å¯¹è±¡å®é™…æ‹¥æœ‰çš„æ–¹æ³•ï¼Œæ— éœ€é™æ€ç±»å‹å£°æ˜

### åŠ¨æ€å¤šæ€ä¸æ´¾å‘

- **è¿è¡Œæ—¶æ–¹æ³•è§£æ**ï¼šæ–¹æ³•è°ƒç”¨åœ¨è¿è¡Œæ—¶æ²¿ç»§æ‰¿é“¾æŸ¥æ‰¾ï¼Œæ”¯æŒåŠ¨æ€æ´¾å‘
- **åŠ¨æ€æ–¹æ³•ç»‘å®š**ï¼šæ–¹æ³•è®¿é—®è‡ªåŠ¨ç»‘å®š self å‚æ•°
- **åŠ¨æ€æšä¸¾æ“ä½œ**ï¼šæšä¸¾å€¼å¯é€šè¿‡é€šç”¨å‡½æ•°ï¼ˆå¦‚ mapã€filterï¼‰è¿›è¡Œæ“ä½œï¼Œä¹Ÿå¯ç›´æ¥é€šè¿‡ç´¢å¼• `[1]`ã€`[2]` è®¿é—®æ„é€ å™¨å‚æ•°ï¼ˆä»“é¢‰è¯­æ³•è¶…é›†æ‰©å±•ï¼‰
- **ç±»å‹çµæ´»çš„æ¨¡å¼åŒ¹é…**ï¼šmatch è¡¨è¾¾å¼åŸºäºè¿è¡Œæ—¶ tag/ç±»å‹åŒ¹é…ï¼Œæ— éœ€ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥

### å‡½æ•°å¼ç¼–ç¨‹

- **Lambda è¡¨è¾¾å¼**ï¼šèŠ±æ‹¬å·è¯­æ³• `{ x, y => x + y }` å’Œåœ†æ‹¬å·è¯­æ³• `() => expr` å‡æ”¯æŒ
- **é«˜é˜¶å‡½æ•°**ï¼šå‡½æ•°å¯ä½œä¸ºå‚æ•°ä¼ é€’ã€ä½œä¸ºè¿”å›å€¼è¿”å›
- **å‡½æ•°ç±»å‹æ ‡æ³¨**ï¼šå‚æ•°å¯æ ‡æ³¨å‡½æ•°ç±»å‹ `fn: (Int64, Int64) -> Int64`
- **æŸ¯é‡ŒåŒ–**ï¼šé€šè¿‡åµŒå¥— Lambda å®ç°ï¼š`let multiply = { a => { b => a * b } }`
- **å‡½æ•°ç»„åˆ**ï¼š`compose(f, g)` å’Œç®¡é“æ“ä½œ `pipe(value, fns)`
- **ç«‹å³è°ƒç”¨**ï¼š`({ x, y => x + y })(3, 4)` ç›´æ¥è°ƒç”¨åŒ¿å Lambda

### Tableï¼ˆè¡¨ï¼‰

- **å…³è”æ•°ç»„**ï¼š`let dict = {}; dict["key"] = "value"`
- **é•¿åº¦è¿ç®—ç¬¦**ï¼š`#table` è·å–åºåˆ—é•¿åº¦
- **è¿­ä»£å™¨**ï¼š
  - `ipairs()` - æœ‰åºæ•°å­—ç´¢å¼•è¿­ä»£
  - `pairs()` - éå†æ‰€æœ‰é”®å€¼å¯¹
  - `for (item in array)` - æ•°ç»„å…ƒç´ éå†ï¼ˆä»“é¢‰è¯­æ³•ï¼‰

### å…ƒç¼–ç¨‹

- **å…ƒè¡¨ï¼ˆMetatableï¼‰**ï¼šé€šè¿‡ `setmetatable()` è®¾ç½®
- **å…ƒæ–¹æ³•**ï¼š`__index`ï¼ˆç´¢å¼•æŸ¥æ‰¾ï¼‰ã€`__add`ï¼ˆåŠ æ³•é‡è½½ï¼‰ã€`__tostring`ï¼ˆå­—ç¬¦ä¸²è¡¨ç¤ºï¼‰
- **æ–¹æ³•è°ƒç”¨é“¾**ï¼šæ”¯æŒ `:` è¯­æ³•è‡ªåŠ¨ä¼ é€’ self
- **è¿ç®—ç¬¦é‡è½½**

### é”™è¯¯å¤„ç†

- **å®‰å…¨è°ƒç”¨**ï¼š`pcall(func() { ... })` æ•è·è¿è¡Œæ—¶é”™è¯¯
- **æŠ›å‡ºé”™è¯¯**ï¼š`error("message")`

### åç¨‹

- **åˆ›å»ºåç¨‹**ï¼š`coroutine.create(func() { ... })`
- **æŒ‚èµ·/æ¢å¤**ï¼š`coroutine.yield(value)` / `coroutine.resume(co)`
- **å€¼ä¼ é€’**ï¼šåç¨‹é—´å¯ä¼ é€’è¿”å›å€¼
- **ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼**

## é”™è¯¯æ£€æŸ¥ä¸è¯Šæ–­

æœ¬è§£é‡Šå™¨å®ç°äº†å¤šå±‚æ¬¡çš„é”™è¯¯æ£€æŸ¥å’Œå‹å¥½çš„è¯Šæ–­ä¿¡æ¯ï¼š

### è¯æ³•é”™è¯¯
- **æœªç»“æŸçš„å­—ç¬¦ä¸²**ï¼šæ£€æµ‹ç¼ºå°‘é—­åˆå¼•å·çš„å­—ç¬¦ä¸²å­—é¢é‡
- **æ— æ•ˆè½¬ä¹‰åºåˆ—**ï¼šæ£€æµ‹ `\q` ç­‰éæ³•è½¬ä¹‰å­—ç¬¦
- **æ ¼å¼é”™è¯¯çš„æ•°å­—**ï¼šæ£€æµ‹ `0xGG` ç­‰æ— æ•ˆæ•°å­—å­—é¢é‡
- **æœªç»“æŸçš„å—æ³¨é‡Š**ï¼šæ£€æµ‹ç¼ºå°‘ `*/` é—­åˆçš„æ³¨é‡Š

### è¯­æ³•é”™è¯¯
- **ç¼ºå¤±æ‹¬å·**ï¼š`if`ã€`while`ã€`for`ã€`match` æ¡ä»¶å¿…é¡»ç”¨ `()` åŒ…è£¹
- **ç¼ºå¤±èŠ±æ‹¬å·**ï¼šæ£€æµ‹æœªé—­åˆçš„ `struct`/`class`/`enum`/`match` ä½“
- **ç¼ºå¤±ç®­å¤´**ï¼š`match` çš„ `case` åˆ†æ”¯å¿…é¡»ä½¿ç”¨ `=>`
- **ç¼ºå¤±åç§°**ï¼š`struct`/`class`/`func` åå¿…é¡»æœ‰åç§°
- **ç©ºç±»å‹æ³¨è§£**ï¼š`let x: = 10` ç­‰å†’å·åç¼ºå°‘ç±»å‹åçš„æƒ…å†µ
- **éæ³•æˆå‘˜**ï¼š`struct`/`class` ä½“å†…å…è®¸ `func`ã€`init`ã€`let`ã€`var`ã€`static func`ã€`operator func`
- **éæ³•æšä¸¾å†…å®¹**ï¼š`enum` ä½“å†…åªå…è®¸ `|`ã€æ„é€ å™¨åã€`func` æˆ– `operator func`
- **éæ³•æ¥å£å†…å®¹**ï¼š`interface` ä½“å†…åªå…è®¸ `func` å£°æ˜

### è¯­ä¹‰é”™è¯¯
- **ä¸å¯å˜å˜é‡èµ‹å€¼**ï¼š`let` å£°æ˜çš„å˜é‡ä¸å¯é‡æ–°èµ‹å€¼
- **let ç¼ºå°‘åˆå§‹åŒ–**ï¼š`let` å£°æ˜å¿…é¡»æä¾›åˆå§‹å€¼
- **å¾ªç¯å¤– break**ï¼š`break` åªèƒ½åœ¨å¾ªç¯ä½“å†…ä½¿ç”¨
- **å¾ªç¯å¤– continue**ï¼š`continue` åªèƒ½åœ¨å¾ªç¯ä½“å†…ä½¿ç”¨
- **åŒåå˜é‡é‡å®šä¹‰**ï¼šåŒä¸€ä½œç”¨åŸŸå†…é‡å¤å®šä¹‰åŒåå˜é‡ï¼ˆä¸åŒä½œç”¨åŸŸå…è®¸é®è”½ï¼‰
- **åŒåç±»å‹é‡å®šä¹‰**ï¼šåŒä¸€ä½œç”¨åŸŸå†…é‡å¤å®šä¹‰åŒå struct/class/enum/interface
- **è¿è¡Œæ—¶ç±»å‹é”™è¯¯**ï¼šé€šè¿‡ Lua VM æ£€æµ‹ç®—æœ¯ã€æ¯”è¾ƒç­‰æ“ä½œçš„ç±»å‹ä¸åŒ¹é…

## ä½¿ç”¨é™åˆ¶

1. **ç±»å‹æ³¨è§£ä¸ºç¼–è¯‘æœŸæç¤º**ï¼šç±»å‹æ³¨è§£åœ¨è§£æé˜¶æ®µè¢«è¯»å–åè·³è¿‡ï¼Œä¸è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥ï¼Œæ‰€æœ‰ç±»å‹æ£€æŸ¥åœ¨è¿è¡Œæ—¶ç”± Lua VM å®Œæˆ
2. **ç»§æ‰¿**ï¼šæ”¯æŒ `class B <: A` å•ç»§æ‰¿è¯­æ³•ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»æ–¹æ³•å¹¶å¯é‡å†™ï¼›`open` ä¿®é¥°çš„ç±»å¯è¢«ç»§æ‰¿ï¼Œ`open` ä¿®é¥°çš„æ–¹æ³•å¯è¢«é‡å†™ï¼›æ”¯æŒ `super(args)` è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
3. **æ¥å£**ï¼š`interface` å£°æ˜åˆ›å»ºæ¥å£è¡¨ï¼Œæ–¹æ³•ç­¾åè¢«è§£æï¼›æ¥å£ä¸­çš„æ–¹æ³•å¯æä¾›é»˜è®¤å®ç°ä½“ï¼Œé»˜è®¤æ–¹æ³•è¢«ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ¥å£è¡¨ä¸­ï¼›class å¯ä½¿ç”¨ `<:` å£°æ˜å®ç°æ¥å£ï¼Œè¿è¡Œæ—¶é€šè¿‡ `__cangjie_apply_interface` è‡ªåŠ¨ç»§æ‰¿æœªè¦†ç›–çš„é»˜è®¤æ–¹æ³•
4. **æ³›å‹**ï¼šæ³›å‹ç±»å‹å‚æ•°åœ¨è§£æé˜¶æ®µè¢«è·³è¿‡ï¼Œä¾èµ– Lua çš„åŠ¨æ€ç±»å‹åœ¨è¿è¡Œæ—¶å®ç°å¤šæ€
5. **å†…ç½®ç±»å‹æ‰©å±•**ï¼šæ‰©å±•æ–¹æ³•é€šè¿‡å…ƒè¡¨ `__index` å®ç°ï¼Œå¯¹åŒä¸€ç±»å‹çš„å¤šæ¬¡æ‰©å±•ä¼šå åŠ æ–¹æ³•ï¼ˆåç»­æ‰©å±•çš„æ–¹æ³•ä¼šä¼˜å…ˆè¢«æŸ¥æ‰¾ï¼‰ï¼›æ‰©å±•æ–¹æ³•å¯ç›´æ¥åœ¨å­—é¢é‡ä¸Šè°ƒç”¨ï¼ˆå¦‚ `2.pow(10)`ã€`"hello".shout()`ã€`true.toggle()`ï¼‰ï¼Œæ”¯æŒæ–¹æ³•é“¾å¼è°ƒç”¨
6. **éšå¼ this**ï¼šä»…åœ¨ `struct/class` ä½“å†…å£°æ˜çš„ `var/let` å­—æ®µåå¯è¢«éšå¼è§£æä¸º `self.field`ï¼Œå±€éƒ¨å˜é‡åŒåæ—¶å±€éƒ¨å˜é‡ä¼˜å…ˆ
7. **è®¿é—®æ§åˆ¶**ï¼šæ”¯æŒ `public` å’Œ `private` ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼ˆç¼–è¯‘æœŸè¯­æ³•æ”¯æŒï¼Œè¿è¡Œæ—¶ä¸å¼ºåˆ¶æ£€æŸ¥ï¼‰
8. **å…ƒç»„åµŒå¥—å­—é¢é‡**ï¼šä¸æ”¯æŒç›´æ¥åµŒå¥—å…ƒç»„å­—é¢é‡ `((1,2), (3,4))`ï¼Œéœ€é€šè¿‡å˜é‡é—´æ¥åµŒå¥—
9. **æšä¸¾ç±»å‹**ï¼šæ”¯æŒå¸¦å‚æ•°çš„æšä¸¾æ„é€ å™¨ã€é€’å½’æšä¸¾ã€æ³›å‹æšä¸¾ã€æˆå‘˜å‡½æ•°å’Œæ“ä½œç¬¦é‡è½½
10. **æ¨¡å¼åŒ¹é…**ï¼šæ”¯æŒæšä¸¾æ¨¡å¼ã€å¸¸é‡æ¨¡å¼ã€é€šé…ç¬¦æ¨¡å¼ã€ç±»å‹æ¨¡å¼å’Œå…ƒç»„æ¨¡å¼ï¼Œä½†ä¸æ”¯æŒå®ˆå«æ¡ä»¶ï¼ˆwhereï¼‰
11. **å¼‚å¸¸å¤„ç†**ï¼šä¸æ”¯æŒ `try/catch/finally`ï¼Œä½¿ç”¨ Lua çš„ `pcall` æ›¿ä»£
12. **æ–‡ä»¶æ¨¡å—**ï¼šä¸æ”¯æŒä»“é¢‰çš„ `package`/`import` æ¨¡å—ç³»ç»Ÿï¼Œä½¿ç”¨ Lua çš„ `require` æ›¿ä»£
13. **å‘½åå‚æ•°**ï¼šæ”¯æŒ `param!: Type = default` å£°æ˜å½¢å¼ï¼Œæœªä¼ å‚æ—¶è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼ï¼›æ”¯æŒ `name: value` å‘½åè°ƒç”¨è¯­æ³•
14. **Lambda è¡¨è¾¾å¼**ï¼šèŠ±æ‹¬å· Lambda `{ x => expr }` ä¸­ï¼Œå¦‚æœ body åŒ…å«èµ‹å€¼è¯­å¥åˆ™ä½¿ç”¨ `statlist` è§£æï¼ˆéœ€æ˜¾å¼ `return`ï¼‰ï¼Œå¦åˆ™è‡ªåŠ¨è¿”å›è¡¨è¾¾å¼å€¼
15. **å¹‚è¿ç®—**ï¼š`**` è¿ç®—ç»“æœä¸ºæµ®ç‚¹æ•°ï¼ˆéµå¾ª Lua åº•å±‚å®ç°ï¼‰ï¼Œå¦‚ `2 ** 10` è¿”å› `1024.0`
16. **é»˜è®¤å€¼æ£€æµ‹**ï¼šé»˜è®¤å€¼æ£€æµ‹åŸºäº nil åˆ¤æ–­ï¼ˆä»…å½“å‚æ•°ä¸º nil æ—¶ä½¿ç”¨é»˜è®¤å€¼ï¼‰ï¼Œä¼ é€’ `false` ä¸ä¼šè¢«é”™è¯¯åœ°æ›¿æ¢ä¸ºé»˜è®¤å€¼
17. **Unit ç±»å‹**ï¼š`()` æ˜ å°„ä¸º nilï¼Œå¯ç”¨ä½œè¡¨è¾¾å¼æˆ–ç©ºæ“ä½œè¯­å¥
18. **è¡¨è¾¾å¼æ±‚å€¼**ï¼šifã€matchã€ä»£ç å—å¯ç”¨ä½œè¡¨è¾¾å¼ï¼Œå…¶å€¼ä¸ºæ‰€æ‰§è¡Œåˆ†æ”¯ï¼ˆæˆ–ä»£ç å—ï¼‰æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›å‡½æ•°ä½“æ”¯æŒéšå¼è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›while/for ç­‰æœªç¡®å®šæ±‚å€¼è§„åˆ™çš„è¡¨è¾¾å¼å…¶å€¼ä¸º nil
19. **æ•°ç»„åŒºé—´ç´¢å¼•**ï¼šæ”¯æŒ `arr[start..end]`ï¼ˆå·¦é—­å³å¼€åŒºé—´ï¼‰å’Œ `arr[start..=end]`ï¼ˆé—­åŒºé—´ï¼‰å–å€¼ï¼Œä»¥åŠ `arr[start..end] = values` åŒºé—´èµ‹å€¼ï¼›æ”¯æŒå¤šç»´æ•°ç»„çš„åŒºé—´æ“ä½œå¦‚ `a[0][1..3]`ï¼›èµ·å§‹å’Œç»“æŸä½ç½®æ”¯æŒä»»æ„è¡¨è¾¾å¼ï¼ˆå¦‚ `arr[n - m..n]`ï¼‰
20. **ä¸»æ„é€ å‡½æ•°**ï¼šstruct/class æ”¯æŒä»¥ç±»å‹åå‘½åçš„ä¸»æ„é€ å‡½æ•°ï¼Œå‚æ•°å‰åŠ  `let`/`var` è‡ªåŠ¨å£°æ˜ä¸ºæˆå‘˜å˜é‡
21. **æ¥å£é»˜è®¤å®ç°**ï¼š`interface` ä¸­çš„æ–¹æ³•å¯ä»¥æä¾›é»˜è®¤å®ç°ä½“ï¼ˆåŒ…æ‹¬ `func` å’Œ `operator func`ï¼‰ï¼Œå®ç°ç±»é€šè¿‡ `<:` ç»§æ‰¿é»˜è®¤æ–¹æ³•ï¼Œå·²å®šä¹‰çš„æ–¹æ³•ä¼˜å…ˆäºæ¥å£é»˜è®¤å®ç°
22. **å¤åˆèµ‹å€¼è¿ç®—ç¬¦**ï¼šæ”¯æŒ `+=`ã€`-=`ã€`*=`ã€`/=` å¤åˆèµ‹å€¼è¯­æ³•ï¼Œç¼–è¯‘ä¸º `x = x op expr` å½¢å¼
23. **å­—æ®µé»˜è®¤å€¼**ï¼šstruct/class ä¸­ `var field = defaultValue` å£°æ˜ä¼šå°†é»˜è®¤å€¼å­˜å‚¨åœ¨ç±»è¡¨ä¸­ï¼Œå®ä¾‹é€šè¿‡åŸå‹é“¾ç»§æ‰¿é»˜è®¤å€¼
24. **è¡¨è¾¾å¼è¯­å¥**ï¼šæ”¯æŒå°†è¿ç®—ç¬¦è¡¨è¾¾å¼ä½œä¸ºè¯­å¥ä½¿ç”¨ï¼ˆå¦‚ `a << b`ï¼‰ï¼Œç»“æœè¢«ä¸¢å¼ƒï¼Œç”¨äºè¿ç®—ç¬¦çš„å‰¯ä½œç”¨è°ƒç”¨
25. **Float64 ç±»å‹å·¥å…·**ï¼š`extend Float64` åæ”¯æŒ `Float64.GetPI()` è·å–åœ†å‘¨ç‡ã€`Float64(value)` ç±»å‹è½¬æ¢
26. **æ•°ç»„ for-in éå†**ï¼š`for (item in array) { ... }` æ”¯æŒéå†æ•°ç»„å…ƒç´ ï¼Œåº•å±‚é€šè¿‡ `__cangjie_iter` è¿è¡Œæ—¶å‡½æ•°è‡ªåŠ¨é€‚é…

## æ„å»ºä¸æµ‹è¯•

### æ„å»º

é¡¹ç›®ä½¿ç”¨ GNU Make æ„å»ºç³»ç»Ÿï¼Œç¼–è¯‘äº§ç‰©è¾“å‡ºåˆ° `build/` ç›®å½•ã€‚

```bash
# æ ‡å‡†æ„å»ºï¼ˆç”Ÿæˆ lua å¯æ‰§è¡Œæ–‡ä»¶ï¼‰
make

# å¸¦å†…éƒ¨æµ‹è¯•æ”¯æŒçš„æ„å»ºï¼ˆå¯ç”¨æ–­è¨€å’Œè°ƒè¯•ä¿¡æ¯ï¼‰
make TESTS='-DLUA_USER_H="ltests.h" -Og -g'

# æ¸…ç†æ„å»ºäº§ç‰©
make clean
```

æ„å»ºæˆåŠŸåï¼Œ`lua` å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚

### è¿è¡Œ

```bash
# è¿è¡Œä»“é¢‰æºæ–‡ä»¶
./lua example.cj

# äº¤äº’å¼æ¨¡å¼ï¼ˆlet/var å£°æ˜åœ¨è¡Œé—´ä¿æŒæœ‰æ•ˆï¼‰
./lua
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰ä»“é¢‰æµ‹è¯•ç”¨ä¾‹ï¼ˆåŒ…æ‹¬åŸºç¡€æµ‹è¯•ã€æ‰©å±•ç‰¹æ€§ã€ç”¨æ³•ç¤ºä¾‹å’Œè¯Šæ–­æµ‹è¯•ï¼‰
bash run_tests.sh
```

æµ‹è¯•è„šæœ¬ä¼šè‡ªåŠ¨å‘ç°å¹¶æ‰§è¡Œ `cangjie-tests/` ä¸‹æ‰€æœ‰å­ç›®å½•ä¸­çš„ `.cj` æµ‹è¯•æ–‡ä»¶ï¼Œå¹¶æ±‡æ€»ç»“æœã€‚

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ makefile                      # æ„å»ºè„šæœ¬
â”œâ”€â”€ run_tests.sh                  # æµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ readme.md                     # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ core/                     # Lua æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ runtime/              # è¿è¡Œæ—¶æ‰§è¡Œå¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ lapi.c            #   C API æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ ldebug.c          #   è°ƒè¯•æ¥å£ä¸é’©å­
â”‚   â”‚   â”‚   â”œâ”€â”€ ldo.c             #   å‡½æ•°è°ƒç”¨ä¸æ ˆç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ lfunc.c           #   å‡½æ•°åŸå‹ä¸é—­åŒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ lopcodes.c        #   æ“ä½œç å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ lstate.c          #   å…¨å±€çŠ¶æ€ä¸çº¿ç¨‹çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ lvm.c             #   è™šæ‹Ÿæœºæ‰§è¡Œå¼•æ“
â”‚   â”‚   â”‚   â””â”€â”€ lzio.c            #   ç¼“å†²æµ I/O
â”‚   â”‚   â”œâ”€â”€ memory/               # å†…å­˜ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ lgc.c             #   åƒåœ¾æ”¶é›†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ lmem.c            #   å†…å­˜åˆ†é…å™¨
â”‚   â”‚   â””â”€â”€ object/               # å¯¹è±¡ä¸ç±»å‹ç³»ç»Ÿ
â”‚   â”‚       â”œâ”€â”€ lctype.c          #   å­—ç¬¦ç±»å‹å·¥å…·
â”‚   â”‚       â”œâ”€â”€ lobject.c         #   å¯¹è±¡/å€¼æ“ä½œ
â”‚   â”‚       â”œâ”€â”€ lstring.c         #   å­—ç¬¦ä¸²é©»ç•™
â”‚   â”‚       â”œâ”€â”€ ltable.c          #   è¡¨ï¼ˆå“ˆå¸Œè¡¨ï¼‰å®ç°
â”‚   â”‚       â””â”€â”€ ltm.c             #   å…ƒæ–¹æ³•ï¼ˆæ ‡ç­¾æ–¹æ³•ï¼‰
â”‚   â”œâ”€â”€ compiler/                 # ç¼–è¯‘å™¨
â”‚   â”‚   â”œâ”€â”€ lcode.c               #   ä»£ç ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ ldump.c               #   å­—èŠ‚ç åºåˆ—åŒ–
â”‚   â”‚   â”œâ”€â”€ llex.c                #   è¯æ³•åˆ†æå™¨ï¼ˆæ”¯æŒä»“é¢‰å…³é”®å­—ã€è¿ç®—ç¬¦ã€å­—ç¬¦ä¸²æ’å€¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ lparser.c             #   è¯­æ³•åˆ†æå™¨æ ¸å¿ƒï¼ˆå˜é‡ã€è¡¨è¾¾å¼ã€è¯­å¥ã€å‡½æ•°ã€æ§åˆ¶æµï¼‰
â”‚   â”‚   â”œâ”€â”€ lparser_cj_types.c    #   ä»“é¢‰ç±»å‹å®šä¹‰è§£æï¼ˆstruct/class/interface/extend/enumï¼‰ï¼Œ
â”‚   â”‚   â”‚                         #     æä¾›å…±äº«è¾…åŠ©å‡½æ•°ï¼šè¿ç®—ç¬¦åˆ°å…ƒæ–¹æ³•æ˜ å°„ã€æ–¹æ³•ä½“è§£æã€
â”‚   â”‚   â”‚                         #     è¿è¡Œæ—¶è°ƒç”¨ç”Ÿæˆã€æ¥å£åº”ç”¨ç­‰
â”‚   â”‚   â”œâ”€â”€ lparser_cj_match.c    #   ä»“é¢‰æ¨¡å¼åŒ¹é…ä¸è¡¨è¾¾å¼å½¢å¼ï¼ˆmatch/if/block è¡¨è¾¾å¼ï¼‰ï¼Œ
â”‚   â”‚   â”‚                         #     ç»Ÿä¸€åŒ¹é…è¯­å¥/è¡¨è¾¾å¼å®ç°ï¼Œå…±äº«è‡ªåŠ¨è¿”å›è§£æé€»è¾‘
â”‚   â”‚   â””â”€â”€ lundump.c             #   å­—èŠ‚ç ååºåˆ—åŒ–
â”‚   â”œâ”€â”€ libs/                     # æ ‡å‡†åº“ä¸è¿è¡Œæ—¶åº“
â”‚   â”‚   â”œâ”€â”€ lauxlib.c             #   è¾…åŠ©åº“
â”‚   â”‚   â”œâ”€â”€ lbaselib.c            #   åŸºç¡€åº“ï¼ˆLua æ ‡å‡†å‡½æ•°ï¼‰
â”‚   â”‚   â”œâ”€â”€ lbaselib_cj.c         #   ä»“é¢‰è¿è¡Œæ—¶æ”¯æŒï¼ˆOOP å®ä¾‹åŒ–ä¸æ–¹æ³•ç»‘å®šã€ç»§æ‰¿é“¾ã€
â”‚   â”‚   â”‚                         #     æšä¸¾è¿è¡Œæ—¶ã€å…ƒç»„ã€ç±»å‹è½¬æ¢ã€Optionã€æ¨¡å¼åŒ¹é…ï¼‰
â”‚   â”‚   â”œâ”€â”€ lcorolib.c            #   åç¨‹åº“
â”‚   â”‚   â”œâ”€â”€ ldblib.c              #   è°ƒè¯•åº“
â”‚   â”‚   â”œâ”€â”€ linit.c               #   åº“åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ liolib.c              #   I/O åº“
â”‚   â”‚   â”œâ”€â”€ lmathlib.c            #   æ•°å­¦åº“
â”‚   â”‚   â”œâ”€â”€ loadlib.c             #   åŠ¨æ€åŠ è½½åº“
â”‚   â”‚   â”œâ”€â”€ loslib.c              #   æ“ä½œç³»ç»Ÿåº“
â”‚   â”‚   â”œâ”€â”€ lstrlib.c             #   å­—ç¬¦ä¸²åº“
â”‚   â”‚   â”œâ”€â”€ ltablib.c             #   è¡¨æ“ä½œåº“
â”‚   â”‚   â””â”€â”€ lutf8lib.c            #   UTF-8 åº“
â”‚   â”œâ”€â”€ include/                  # å¤´æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ lua.h                 #   Lua å…¬å…± API
â”‚   â”‚   â”œâ”€â”€ luaconf.h             #   ç¼–è¯‘é…ç½®
â”‚   â”‚   â”œâ”€â”€ lualib.h              #   æ ‡å‡†åº“æ¥å£
â”‚   â”‚   â”œâ”€â”€ lauxlib.h             #   è¾…åŠ©åº“æ¥å£
â”‚   â”‚   â”œâ”€â”€ lbaselib_cj.h         #   ä»“é¢‰è¿è¡Œæ—¶æ¥å£
â”‚   â”‚   â””â”€â”€ ...                   #   å…¶ä»–å†…éƒ¨å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ app/                      # åº”ç”¨ç¨‹åº
â”‚   â”‚   â”œâ”€â”€ lua.c                 #   Lua/ä»“é¢‰è§£é‡Šå™¨å…¥å£
â”‚   â”‚   â””â”€â”€ onelua.c              #   å•æ–‡ä»¶ç¼–è¯‘ç‰ˆæœ¬
â”‚   â””â”€â”€ tests/                    # å†…éƒ¨æµ‹è¯•æ”¯æŒ
â”‚       â”œâ”€â”€ ltests.c              #   å†…éƒ¨æµ‹è¯•æ¡†æ¶
â”‚       â””â”€â”€ ltests.h              #   æµ‹è¯•å¤´æ–‡ä»¶
â”œâ”€â”€ cangjie-tests/                # ä»“é¢‰è¯­è¨€æµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ *.cj                      #   åŸºç¡€è¯­è¨€ç‰¹æ€§æµ‹è¯•ï¼ˆ72 ä¸ªï¼‰
â”‚   â”œâ”€â”€ ext-features/             #   èåˆ Lua åŠ¨æ€ç‰¹æ€§çš„æ‰©å±•æµ‹è¯•ï¼ˆ5 ä¸ªï¼‰
â”‚   â”œâ”€â”€ usages/                   #   ç»¼åˆåº”ç”¨æ¡ˆä¾‹ï¼ˆ16 ä¸ªï¼‰
â”‚   â””â”€â”€ diagnosis/                #   é”™è¯¯æ£€æµ‹å’Œè¯Šæ–­æµ‹è¯•ï¼ˆ10 ä¸ªï¼‰
â”œâ”€â”€ testes/                       # Lua åŸç”Ÿæµ‹è¯•å¥—ä»¶
â””â”€â”€ manual/                       # Lua å‚è€ƒæ‰‹å†Œ
```

## å‚è€ƒ

- [ä»“é¢‰è¯­è¨€æ–‡æ¡£](https://cangjie-lang.cn/docs)
- [Lua å®˜æ–¹ç½‘ç«™](https://www.lua.org/)
